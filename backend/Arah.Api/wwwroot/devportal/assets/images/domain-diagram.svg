<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 780" role="img" aria-labelledby="title desc">
  <title id="title">Diagrama de relacionamento do domínio Arah</title>
  <desc id="desc">Usuários conectam-se a territórios por memberships, que controlam feed, mapa e moderação.</desc>
  <style>
    .box { fill: #ffffff; stroke: #1f2b32; stroke-width: 2; rx: 16; }
    .title { font: 600 22px 'Inter', sans-serif; fill: #0b1114; }
    .text { font: 16px 'Inter', sans-serif; fill: #24333b; }
    .link { stroke: #1f2b32; stroke-width: 2; marker-end: url(#arrow); }
    .label { font: 14px 'Inter', sans-serif; fill: #1b2b32; }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L6,3 L0,6" fill="#1f2b32" />
    </marker>
  </defs>

  <rect x="60" y="60" width="280" height="110" class="box" />
  <text x="90" y="110" class="title">User</text>
  <text x="90" y="140" class="text">role: Visitor/Resident/Curator</text>

  <rect x="460" y="40" width="320" height="130" class="box" />
  <text x="490" y="90" class="title">Territory</text>
  <text x="490" y="120" class="text">célula geográfica + status</text>

  <rect x="860" y="60" width="280" height="110" class="box" />
  <text x="890" y="110" class="title">Feature Flags</text>
  <text x="890" y="140" class="text">AlertPosts / EventPosts</text>

  <rect x="380" y="210" width="340" height="120" class="box" />
  <text x="410" y="260" class="title">TerritoryMembership</text>
  <text x="410" y="290" class="text">role + verification status</text>

  <rect x="80" y="360" width="300" height="140" class="box" />
  <text x="110" y="410" class="title">CommunityPost</text>
  <text x="110" y="440" class="text">feed + visibilidade + status</text>

  <rect x="450" y="360" width="300" height="140" class="box" />
  <text x="480" y="410" class="title">PostGeoAnchor</text>
  <text x="480" y="440" class="text">ancoras geográficas</text>

  <rect x="820" y="360" width="300" height="140" class="box" />
  <text x="850" y="410" class="title">MapEntity</text>
  <text x="850" y="440" class="text">status + confirmação</text>

  <rect x="140" y="560" width="300" height="140" class="box" />
  <text x="170" y="610" class="title">Reports</text>
  <text x="170" y="640" class="text">post/user + status</text>

  <rect x="520" y="560" width="300" height="140" class="box" />
  <text x="550" y="610" class="title">Blocks</text>
  <text x="550" y="640" class="text">filtra feed + mapa</text>

  <line x1="200" y1="170" x2="380" y2="230" class="link" />
  <text x="250" y="210" class="label">entra em</text>

  <line x1="540" y1="170" x2="540" y2="210" class="link" />
  <text x="560" y="200" class="label">gera</text>

  <line x1="780" y1="100" x2="860" y2="110" class="link" />
  <text x="800" y="92" class="label">configura</text>

  <line x1="450" y1="330" x2="300" y2="360" class="link" />
  <text x="340" y="350" class="label">habilita feed</text>

  <line x1="560" y1="330" x2="560" y2="360" class="link" />
  <text x="580" y="350" class="label">ancora</text>

  <line x1="680" y1="330" x2="820" y2="360" class="link" />
  <text x="720" y="350" class="label">habilita mapa</text>

  <line x1="230" y1="500" x2="260" y2="560" class="link" />
  <text x="200" y="540" class="label">reporta</text>

  <line x1="680" y1="500" x2="670" y2="560" class="link" />
  <text x="630" y="540" class="label">bloqueia</text>

  <line x1="920" y1="500" x2="740" y2="560" class="link" />
  <text x="820" y="540" class="label">impacta</text>
</svg>
